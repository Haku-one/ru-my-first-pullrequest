# 🗺️ СДЭК плагин с интерактивной картой для WooCommerce

Этот репозиторий содержит обновленный плагин СДЭК для WooCommerce с **интерактивной картой** пунктов выдачи.

## 📦 Готовые файлы

### 🎯 Главный файл:
- **`cdek-shipping-with-map.zip`** - готовый плагин с картой для установки в WordPress

### 📂 Исходники:
- **`cdek-shipping/`** - папка с исходным кодом плагина
- **`UPDATE_GUIDE.md`** - подробное руководство по обновлению

### 🛠️ Дополнительные файлы (для разработки):
- **`cdek-api-handler.php`** - отдельный API обработчик
- **`cdek-map-integration.js`** - основной JavaScript для карты
- **`cdek-map-styles.css`** - стили для карты
- **`demo.html`** - демонстрационная страница

## ✨ Возможности

- **🗺️ Интерактивная карта** с Яндекс.Картами
- **🔄 Переключение** между списком и картой
- **🔍 Поиск по городу** с автозаполнением
- **📍 Клик по точкам** на карте для выбора
- **🎯 Автоцентрирование** карты на выбранной точке
- **📱 Адаптивный дизайн** для мобильных устройств
- **🔔 Уведомления** о выборе пункта
- **⚡ Кэширование** данных для быстрой работы

## 🚀 Быстрая установка

1. **Скачайте** файл `cdek-shipping-with-map.zip`
2. **Зайдите** в админку WordPress → Плагины → Добавить новый
3. **Загрузите** ZIP файл
4. **Активируйте** плагин
5. **Настройте** API ключи СДЭК в настройках

## ⚙️ Настройка

### Обязательные настройки:
1. **СДЭК API** - получите в [личном кабинете СДЭК](https://www.cdek.ru/ru/integration)
2. **Client ID** и **Client Secret** - введите в настройках плагина

### Рекомендуемые настройки:
1. **Яндекс.Карты API** - получите на [Developer Яндекс](https://developer.tech.yandex.ru/)
2. **API ключ** - введите для улучшенной работы карты

## 🎮 Как работает

1. Покупатель выбирает доставку СДЭК на checkout
2. Появляется блок с выбором пункта выдачи
3. Можно переключаться между списком и картой
4. На карте видны все пункты выдачи в городе
5. Клик по точке показывает детали и позволяет выбрать пункт
6. Выбранный пункт автоматически применяется к заказу

## 🔧 Технические детали

### Требования:
- WordPress 5.0+
- WooCommerce 4.0+
- PHP 7.4+

### Совместимость:
- ✅ WooCommerce Blocks (новый checkout)
- ✅ Классический WooCommerce checkout
- ✅ Все современные браузеры
- ✅ Мобильные устройства

### API интеграции:
- **СДЭК API v2** - для получения пунктов выдачи
- **Яндекс.Карты API** - для отображения карты
- **WordPress REST API** - для обмена данными

## 📱 Скриншоты

### Список пунктов выдачи:
```
┌─────────────────────────────────────┐
│ Выберите пункт выдачи CDEK          │
│ ┌─────────────────┬─────────────────┐ │
│ │ Москва          │ [Найти]         │ │
│ └─────────────────┴─────────────────┘ │
│ ┌─────────┬─────────┐                 │
│ │ Список  │ Карта   │                 │
│ └─────────┴─────────┘                 │
│ ┌─────────────────────────────────────┐ │
│ │ 📍 СДЭК на Тверской                │ │
│ │    ул. Тверская, 15                 │ │
│ │    Пн-Пт: 8:00-20:00               │ │
│ │    ┌─────────┐                      │ │
│ │    │ Выбрать │                      │ │
│ │    └─────────┘                      │ │
│ └─────────────────────────────────────┘ │
└─────────────────────────────────────┘
```

### Режим карты:
```
┌─────────────────────────────────────┐
│ Выберите пункт выдачи CDEK          │
│ ┌─────────────────┬─────────────────┐ │
│ │ Москва          │ [Найти]         │ │
│ └─────────────────┴─────────────────┘ │
│ ┌─────────┬─────────┐                 │
│ │ Список  │ Карта   │                 │
│ └─────────┴─────────┘                 │
│ ┌─────────────────────────────────────┐ │
│ │        🗺️ КАРТА МОСКВЫ             │ │
│ │                                     │ │
│ │     📍      📍       📍            │ │
│ │                                     │ │
│ │  📍    🎯📍     📍                 │ │
│ │                                     │ │
│ │     📍       📍      📍            │ │
│ └─────────────────────────────────────┘ │
│ ✅ Выбран: СДЭК на Арбате              │
│    ул. Арбат, 25                       │
└─────────────────────────────────────┘
```

## 🆘 Поддержка

При возникновении проблем:

1. **Проверьте** настройки API ключей
2. **Включите** режим отладки WordPress
3. **Проверьте** консоль браузера (F12)
4. **Прочитайте** `UPDATE_GUIDE.md` для решения типичных проблем

## 📝 Лицензия

GPL v2 or later - совместимо с WordPress и WooCommerce

---

**Создано для улучшения пользовательского опыта в интернет-магазинах с доставкой СДЭК** 🚀